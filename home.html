<!-- ppt.html
     Web deck like your screenshot
     ✅ Cover slide before Who we are
     ✅ Start presentation button
     ✅ Tabs, slides, Prev/Next, dots, keyboard, responsive
     ✅ Shows real logos (Tomorrow + Guazi) everywhere
-->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Tomorrow Systems | Guazi — Partnership Deck</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fraunces:opsz,wght@9..144,600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg1:#f6f8ff;
      --bg2:#fff7ea;
      --panel:#ffffff;
      --text:#1f2937;
      --muted:#6b7280;
      --border:#e5e7eb;
      --shadow: 0 20px 50px rgba(31,41,55,.12);
      --shadow2: 0 12px 30px rgba(31,41,55,.08);

      --green:#0ea15b;
      --green2:#0b7a46;
      --gold:#f4c84a;
      --blue:#4f6bff;
      --cyan:#2bb4d6;
      --orange:#ff8a5b;

      --radius: 22px;
      --radius2: 16px;

      --maxw: 1080px;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family:"Space Grotesk", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text);
      background:
        radial-gradient(1200px 700px at 15% 15%, rgba(79,107,255,.18), transparent 60%),
        radial-gradient(1000px 600px at 85% 20%, rgba(244,200,74,.22), transparent 55%),
        linear-gradient(135deg, var(--bg1), var(--bg2));
      overflow-x:hidden;
    }

    /* Topbar */
    .topbar{
      position:sticky; top:0; z-index:20;
      backdrop-filter: blur(10px);
      background: rgba(255,255,255,.55);
      border-bottom:1px solid rgba(229,231,235,.7);
    }
    .topbar-inner{
      max-width:var(--maxw);
      margin:0 auto;
      padding:14px 18px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }
    .brand{
      display:flex;
      align-items:center;
      gap:10px;
      min-width: 260px;
    }

    /* ✅ Real company logo instead of "TS" */
    .logo{
      width:34px; height:34px;
      border-radius:10px;
      background: rgba(255,255,255,.9);
      border:1px solid rgba(229,231,235,.9);
      display:grid;
      place-items:center;
      overflow:hidden;
      box-shadow: 0 8px 18px rgba(31,41,55,.06);
    }
    .logo img{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
    }

    .brand-title{
      display:flex; align-items:center; gap:8px; flex-wrap:wrap;
    }
    .pill{
      font-size:12px;
      color:var(--muted);
      padding:6px 10px;
      border:1px solid rgba(229,231,235,.9);
      background: rgba(255,255,255,.8);
      border-radius:999px;
    }

    .nav-actions{
      display:flex; align-items:center; gap:10px;
    }
    .btn{
      border:1px solid rgba(229,231,235,.9);
      background: rgba(255,255,255,.85);
      padding:10px 14px;
      border-radius:999px;
      cursor:pointer;
      font-weight:600;
      color:#111827;
      display:inline-flex; align-items:center; gap:8px;
      box-shadow: 0 8px 18px rgba(31,41,55,.06);
      transition: transform .12s ease, box-shadow .12s ease, background .12s ease;
      user-select:none;
    }
    .btn:hover{ transform: translateY(-1px); box-shadow: 0 14px 24px rgba(31,41,55,.10); }
    .btn:active{ transform: translateY(0px); }
    .btn.primary{
      border-color: rgba(244,200,74,.8);
      background: rgba(244,200,74,.18);
    }
    .kbd{
      font-size:12px;
      padding:3px 8px;
      border-radius:8px;
      border:1px solid rgba(229,231,235,.9);
      background: rgba(255,255,255,.85);
      color: var(--muted);
    }

    /* Main deck */
    .wrap{
      max-width:var(--maxw);
      margin: 28px auto 70px;
      padding: 0 18px;
    }

    .deck{
      background: rgba(255,255,255,.75);
      border: 1px solid rgba(229,231,235,.8);
      border-radius: calc(var(--radius) + 10px);
      box-shadow: var(--shadow);
      padding: 24px;
    }

    /* Tabs like your screenshot */
    .tabs{
      display:flex; align-items:center; gap:10px;
      padding: 8px 6px 18px;
      flex-wrap:wrap;
    }
    .tab{
      padding: 9px 12px;
      border-radius:999px;
      border:1px solid rgba(229,231,235,.9);
      background: rgba(255,255,255,.75);
      color: var(--muted);
      font-weight:600;
      cursor:pointer;
      transition: background .12s ease, transform .12s ease;
      user-select:none;
    }
    .tab:hover{ transform: translateY(-1px); }
    .tab.active{
      color:#111827;
      border-color: rgba(244,200,74,.85);
      background: rgba(244,200,74,.20);
    }

    /* Slide header */
    .slide-head{
      padding: 8px 8px 14px;
    }
    .h1{
      font-family:"Fraunces", serif;
      font-size: 44px;
      line-height: 1.05;
      margin: 6px 0 6px;
      letter-spacing: .2px;
      color: #0f172a;
    }
    .h1 .accent{ color: var(--green2); }
    .sub{
      color: var(--muted);
      font-size: 16px;
      line-height: 1.6;
      margin: 0 0 12px;
      max-width: 820px;
    }
    .callout{
      border:1px solid rgba(229,231,235,.9);
      background: rgba(255,255,255,.72);
      border-radius: 14px;
      padding: 12px 14px;
      color:#111827;
      font-weight:600;
      box-shadow: var(--shadow2);
      max-width: 900px;
    }

    /* Content grid */
    .grid{
      display:grid;
      grid-template-columns: 1.35fr .85fr;
      gap: 18px;
      margin-top: 16px;
    }
    .grid.single{
      grid-template-columns: 1fr;
    }
    @media (max-width: 980px){
      .grid{ grid-template-columns: 1fr; }
      .brand{ min-width:unset; }
      .h1{ font-size: 36px; }
    }

    .panel{
      background: rgba(255,255,255,.8);
      border: 1px solid rgba(229,231,235,.85);
      border-radius: var(--radius);
      padding: 18px;
      box-shadow: var(--shadow2);
    }
    .panel-title{
      display:flex; align-items:center; justify-content:space-between;
      gap:10px;
      margin-bottom: 10px;
    }
    .panel-title h3{
      margin:0;
      font-size: 15px;
      letter-spacing:.2px;
      color:#111827;
    }
    .tag{
      font-size:12px;
      color: var(--muted);
      padding: 5px 10px;
      border: 1px solid rgba(229,231,235,.9);
      border-radius: 999px;
      background: rgba(255,255,255,.75);
    }

    /* Bullet list */
    .bullets{
      margin: 10px 0 0;
      padding-left: 18px;
      color:#111827;
    }
    .left-media{
      margin-top: 6px;
      border:1px solid rgba(229,231,235,.85);
      border-radius: var(--radius);
      background: rgba(255,255,255,.85);
      box-shadow: var(--shadow2);
      overflow: hidden;
      position: relative;
    }
    .left-media img{
      width:100%;
      height:auto;
      display:block;
      object-fit: contain;
      cursor: zoom-in;
    }
    .left-media-next{
      position:absolute;
      right:12px;
      top:50%;
      transform: translateY(-50%);
      border:1px solid rgba(229,231,235,.9);
      background: rgba(255,255,255,.92);
      width:36px;
      height:36px;
      border-radius: 999px;
      font-weight: 700;
      cursor: pointer;
      display: grid;
      place-items: center;
      box-shadow: 0 10px 22px rgba(31,41,55,.12);
    }
    .bullets li{
      margin: 8px 0;
      line-height: 1.55;
    }
    .muted{ color:var(--muted); }

    /* Stats cards */
    .stats{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-top: 12px;
    }
    @media (max-width: 520px){ .stats{ grid-template-columns: 1fr; } }

    .stat{
      border:1px solid rgba(229,231,235,.9);
      background: rgba(255,255,255,.78);
      border-radius: var(--radius2);
      padding: 14px;
      box-shadow: 0 10px 22px rgba(31,41,55,.06);
      position:relative;
      overflow:hidden;
    }
    .stat::before{
      content:"";
      position:absolute; inset:0;
      background: radial-gradient(500px 120px at 10% 0%, rgba(14,161,91,.12), transparent 55%),
                  radial-gradient(420px 120px at 80% 10%, rgba(79,107,255,.10), transparent 55%);
      pointer-events:none;
    }
    .stat .k{
      position:relative;
      font-size: 12px;
      color: var(--muted);
      margin-bottom: 6px;
      font-weight: 600;
    }
    .stat .v{
      position:relative;
      font-size: 26px;
      font-weight: 800;
      color:#0f172a;
      letter-spacing: .2px;
    }
    .stat .note{
      position:relative;
      margin-top: 6px;
      font-size: 12px;
      color: var(--muted);
      line-height: 1.4;
    }
    .growth-card{
      border:1px solid rgba(229,231,235,.9);
      background: rgba(255,255,255,.78);
      border-radius: var(--radius2);
      padding: 14px;
      box-shadow: 0 10px 22px rgba(31,41,55,.06);
      margin-top: 12px;
    }
    .growth-title{
      font-size: 14px;
      font-weight: 700;
      color:#111827;
    }
    .growth-sub{
      margin-top: 2px;
      font-size: 12px;
      color: var(--muted);
      font-weight: 600;
    }
    .growth-table{
      width:100%;
      border-collapse: collapse;
      margin-top: 8px;
      font-size: 12px;
    }
    .growth-table th,
    .growth-table td{
      text-align:left;
      padding: 6px 0;
    }
    .growth-table th{
      color: var(--muted);
      font-weight: 600;
    }
    .growth-table td{
      border-top:1px dashed rgba(148,163,184,.35);
      color:#0f172a;
    }
    .growth-table td.growth-value{
      font-weight: 700;
    }
    .growth-note{
      margin-top: 8px;
      font-size: 11px;
      color: var(--muted);
      line-height: 1.4;
    }
    @media (max-width: 520px){
      .growth-card{ padding: 12px; }
      .growth-table{ font-size: 11px; }
    }

    /* Images panel */
    .imgbox{
      display:grid;
      gap: 12px;
    }
    .img{
      width:100%;
      aspect-ratio: 16/9;
      border-radius: var(--radius);
      border:1px dashed rgba(148,163,184,.7);
      background: rgba(255,255,255,.65);
      display:grid;
      place-items:center;
      color: var(--muted);
      font-weight: 700;
      overflow:hidden;
      position:relative;
    }
    .img img{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
    }
    .img small{
      position:absolute;
      bottom:10px; left:12px;
      padding: 6px 10px;
      background: rgba(255,255,255,.75);
      border:1px solid rgba(229,231,235,.85);
      border-radius:999px;
      font-size:12px;
      color:#111827;
      backdrop-filter: blur(8px);
    }
    .img.clickable img{ cursor: zoom-in; }
    .img.is-logo{
      background: rgba(255,255,255,.9);
      border-style: solid;
    }
    .img.is-logo img{
      width: 62%;
      height: 62%;
      object-fit: contain;
    }

    /* Lightbox */
    .lightbox{
      position: fixed;
      inset: 0;
      background: rgba(15,23,42,.55);
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      pointer-events: none;
      transition: opacity .16s ease;
      z-index: 60;
      padding: 24px;
    }
    .lightbox.open{
      opacity: 1;
      pointer-events: auto;
    }
    .lightbox img{
      max-width: min(92vw, 1100px);
      max-height: 82vh;
      border-radius: 18px;
      background: #fff;
      box-shadow: var(--shadow);
    }
    .lightbox .lightbox-close{
      position: absolute;
      top: 16px;
      right: 16px;
      border: 1px solid rgba(229,231,235,.9);
      background: rgba(255,255,255,.9);
      padding: 8px 12px;
      border-radius: 999px;
      font-weight: 600;
      cursor: pointer;
    }

    /* Footer controls */
    .footer{
      margin-top: 18px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
      flex-wrap:wrap;
    }
    .progress{
      display:flex; align-items:center; gap:6px;
      flex-wrap:wrap;
    }
    .dot{
      width:10px; height:10px;
      border-radius:99px;
      border:1px solid rgba(148,163,184,.65);
      background: rgba(255,255,255,.55);
      cursor:pointer;
      transition: transform .12s ease, background .12s ease;
    }
    .dot:hover{ transform: translateY(-1px); }
    .dot.active{
      background: rgba(14,161,91,.55);
      border-color: rgba(14,161,91,.75);
    }
    .meta{
      color: var(--muted);
      font-size: 13px;
      display:flex; align-items:center; gap:10px;
    }

    /* ✅ Cover slide special layout */
    .cover-wrap{
      display:grid;
      gap:16px;
    }
    .cover-image{
      width:100%;
      border-radius: var(--radius);
      overflow:hidden;
      border:1px solid rgba(229,231,235,.85);
      background: rgba(255,255,255,.7);
      box-shadow: var(--shadow2);
      aspect-ratio: 16/7;
    }
    .cover-image img{
      width:100%;
      height:100%;
      object-fit: cover;
      display:block;
    }
    .cover-logos{
      display:flex;
      justify-content:center;
      gap:16px;
      flex-wrap:wrap;
      padding:14px;
      border-radius: var(--radius);
      border:1px solid rgba(229,231,235,.85);
      background: rgba(255,255,255,.72);
      box-shadow: var(--shadow2);
    }
    .cover-logos .logo-card{
      background:white;
      border:1px solid rgba(229,231,235,.85);
      border-radius: 16px;
      padding: 12px 16px;
      box-shadow: 0 10px 22px rgba(31,41,55,.06);
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .cover-logos img{
      height: 54px;
      width:auto;
      display:block;
    }
    .start-btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      padding: 12px 18px;
      border-radius: 999px;
      border:1px solid rgba(244,200,74,.85);
      background: linear-gradient(135deg, rgba(244,200,74,.26), rgba(79,107,255,.18));
      font-weight: 800;
      cursor:pointer;
      box-shadow: 0 14px 26px rgba(31,41,55,.10);
      transition: transform .12s ease, box-shadow .12s ease;
      user-select:none;
    }
    .start-btn:hover{ transform: translateY(-1px); box-shadow: 0 18px 34px rgba(31,41,55,.14); }

    /* Print */
    @media print{
      .topbar, .footer{ display:none !important; }
      body{ background: #fff; }
      .deck{ box-shadow:none; border:1px solid #ddd; }
    }
  </style>
</head>
<body>

  <header class="topbar">
    <div class="topbar-inner">
      <div class="brand">
        <!-- ✅ Real logo -->
        <div class="logo" title="Tomorrow Systems">
          <img src="assets/tomorrow.jpeg" alt="Tomorrow Systems Logo">
        </div>
        <div class="brand-title">
          <span class="pill">Tomorrow Systems</span>
          <span class="pill">Guazi</span>
          <span class="pill">Partnership Deck</span>
        </div>
      </div>

      <div class="nav-actions">
        <button class="btn" id="btnPrev">← Prev <span class="kbd">←</span></button>
        <button class="btn primary" id="btnNext">Next → <span class="kbd">→</span></button>
      </div>
    </div>
  </header>

  <main class="wrap">
    <section class="deck">
      <div class="tabs" id="tabs"></div>

      <div class="slide-head">
        <div class="h1" id="title">—</div>
        <p class="sub" id="subtitle"></p>
        <div class="callout" id="callout" style="display:none;"></div>

        <!-- ✅ Cover-only elements -->
        <div class="cover-wrap" id="coverArea" style="display:none;">
          <div class="cover-image">
            <img src="assets/cover.png" alt="Cover">
          </div>

          <div class="cover-logos">
            <div class="logo-card"><img src="assets/tomorrow.jpeg" alt="Tomorrow Systems"></div>
            <div class="logo-card"><img src="assets/guazi.png" alt="Guazi"></div>
          </div>

          <div style="display:flex;justify-content:center;">
            <button class="start-btn" id="btnStart">Start presentation →</button>
          </div>
        </div>
      </div>

      <div class="grid" id="mainGrid">
        <div class="panel">
          <div class="panel-title" id="panelTitleLeftWrap">
            <h3 id="panelTitleLeft">Key points</h3>
            <span class="tag" id="panelTagLeft">Overview</span>
          </div>

          <div class="left-media" id="leftMedia" style="display:none;"></div>
          <ul class="bullets" id="bullets"></ul>
          <div class="growth-card" id="growthCard" style="display:none;"></div>
          <div class="stats" id="stats"></div>
        </div>

        <div class="panel" id="rightPanel">
          <div class="panel-title">
            <h3 id="panelTitleRight">Evidence</h3>
            <span class="tag" id="panelTagRight">Charts / Images</span>
          </div>

          <div class="imgbox" id="images"></div>
          <div class="muted" style="margin-top:10px;font-size:12px;line-height:1.5" id="sources"></div>
        </div>
      </div>

      <div class="footer">
        <div class="progress" id="progress"></div>
        <div class="meta">
          <span id="slideIndex">Slide 1 / 1</span>
          <span class="kbd">Home</span> start
          <span class="kbd">End</span> last
        </div>
      </div>
    </section>
  </main>

  <div class="lightbox" id="lightbox" aria-hidden="true">
    <button class="lightbox-close" id="lightboxClose" type="button" aria-label="Close image">Close</button>
    <img id="lightboxImg" alt="">
  </div>

  <script>
    // ===========================
    // SLIDES
    // ✅ Added COVER slide BEFORE Who we are
    // ===========================
    const SLIDES = [
      {
        id: "cover",
        tab: "Morocco & Africa",
        isCover: true,
        title: "Tomorrow Systems <span class='accent'>|</span> Guazi",
        subtitle: "Deployment of a structured used-car ecosystem in Morocco & Africa.",
        callout: "We are not building a platform from scratch — we are deploying a proven one, locally adapted."
      },

      {
        id: "who-we-are",
        tab: "Morocco & Africa",
        title: "Who we are — <span class='accent'>Tomorrow Systems</span>",
        subtitle: "Smart mobility & digital infrastructure company delivering mission-critical urban systems across Morocco and Africa.",
        callout: "We deliver complex infrastructure + software programs: from design and commissioning to operations and asset performance.",
        hideRightPanel: true,
        leftTag: "Company snapshot",
        rightTag: "Proof points",
        bullets: [
          "<b>Smart City & Mobility specialist</b> (traffic, urban mobility, field devices, operations).",
          "<b>End-to-end delivery</b>: planning → deployment → testing/commissioning → O&M support.",
          "<b>Public infrastructure DNA</b>: built for reliability, governance, and scale.",
          "<span class='muted'>Positioning:</span> bridging engineering execution with digital platforms and data."
        ],
        leftImages: [
          { src: "assets/4.png", alt: "Key points snapshot" },
          { src: "assets/7.png", alt: "Key points snapshot 2" }
        ],
        growth: {
          title: "Confirmed portfolio growth",
          subtitle: "Portfolio value (MAD)",
          rows: [
            { year: "2021", value: "300M MAD" },
            { year: "2022", value: "350M MAD" },
            { year: "2023", value: "420M MAD" },
            { year: "2024", value: "505M MAD" },
            { year: "2025", value: "2.7B MAD" },
            { year: "2026*", value: "3.4B MAD" }
          ],
          note: "Source: internal portfolio figures (Tomorrow Systems materials)."
        },
        stats: [
          { k: "Smart intersections (example scope)", v: "300+", note: "Traffic signalization & mobility deployments (portfolio scale)." },
          { k: "Operations mindset", v: "O&M", note: "Asset management, assistance, maintenance planning." },
        ],
        images: [
          { label: "what we do in smart city", src: "assets/Company Mobility.png" },
          { label: "WE DO", src: "assets/Portfolio scale.png" },
        ],
        sources: [
          "Internal portfolio figures and project references (Tomorrow Systems materials)."
        ]
      },

      {
        id: "market-context",
        tab: "Strategic Deployment",
        title: "Market context in <span class='accent'>Morocco</span>",
        subtitle: "A structurally growing automotive market with accelerating Chinese brand adoption and EV/hybrid momentum.",
        callout: "The market is growing in volume and technology — but trust, standards, and transaction structure lag behind.",
        leftTag: "Growth & adoption",
        rightTag: "Evidence",
        bullets: [
          "<b>New vehicle market growth</b>: 122,000 units (2014) → 176,000 units (2024) <span class='muted'>(+44k / +36%)</span>.",
          "<b>Chinese brands are mainstream</b>: ~<b>32%</b> of total sales; ~<b>25–30%</b> of new registrations (2025 est.).",
          "<b>Chinese brands momentum</b>: 2,392 units (end July 2024) → 8,210 units (end July 2025 est.) <span class='muted'>(+240% YoY)</span>.",
          "<b>EV/hybrid acceleration</b>: 550 units (2023) → 5,500 expected (2025) <span class='muted'>(x10 in 2 years)</span>."
        ],
        stats: [
          { k: "New vehicle sales growth", v: "+36%", note: "2014→2024 (122k→176k)." },
          { k: "Chinese brands share", v: "32%", note: "Share of total sales (snapshot from shared visuals)." },
          { k: "Chinese brands growth", v: "+240%", note: "Example YoY jump (2,392→8,210)." },
          { k: "EV/Hybrid growth", v: "x10", note: "2023→2025 (550→5,500 expected)." }
        ],
        images: [
          { label: "Chinese brands in Morocco (infographic)", src: "assets/Chinese brands in Morocco.png" },
          { label: "Top 10 Chinese cars (infographic)", src: "assets/Top 10 Chinese cars.png" },
        ],
        sources: [
          "Infographics shared by client/team (AutoActu / Le Desk cited in the visuals).",
          "Use official/press confirmation sources in final client version."
        ]
      },

      {
        id: "problem",
        tab: "Used-Car Ecosystem",
        title: "The problem",
        subtitle: "The market is large and active, but structurally fragile — trust, transparency, and standardization remain weak.",
        callout: "Growth is not the issue. The issue is the lack of a trusted, standardized, end-to-end used-car journey.",
        leftTag: "Market pain",
        rightTag: "Impact",
        bullets: [
          "<b>Trust deficit</b>: fear of hidden defects, mileage fraud, accident history gaps.",
          "<b>No standardized inspection</b>: quality varies; reports are not comparable.",
          "<b>Price opacity</b>: same car = different prices; hard to validate fair value.",
          "<b>Fraud risk</b>: deposits, fake listings, identity uncertainty.",
          "<b>Fragmented journey</b>: search → inspect → finance → paperwork are disconnected."
        ],
        stats: [
          { k: "Buyer friction", v: "High", note: "Time + uncertainty across the journey." },
          { k: "Trust level", v: "Low–Medium", note: "Perceived risk remains high." },
        ],
        images: [
          { label: "Buyer journey map (add your diagram)", src: "assets/Buyer journey map.png" },
          { label: "Trust gap visual", src: "assets/Trust gap visual.png" },
        ],
        sources: [
          "Market observations + recurring buyer/seller friction patterns."
        ]
      },

      {
        id: "benchmark",
        tab: "Used-Car Ecosystem",
        title: "Benchmark — why existing solutions fall short",
        subtitle: "Many tools exist, but they solve isolated parts — not the full trust architecture.",
        callout: "",
        leftTag: "Existing channels",
        rightTag: "Where it fails",
        bullets: [
          "<b>Listing sites (e.g., Avito)</b>: great visibility & filters, but <b>no verification</b>, <b>no responsibility</b>.",
          "<b>Social marketplaces (e.g., Facebook Marketplace / groups)</b>: fast reach, but <b>high fraud exposure</b> and weak identity certainty.",
          "<b>Brokers / middlemen</b>: speed and negotiation, but <b>informal</b>, inconsistent, and conflicts of interest.",
          "<b>Dealers/showrooms</b>: more structured, but higher prices and <b>uneven inspection quality</b>.",
          "<b>Garages/inspections</b>: available, but <b>not standardized</b>; reports vary; no end-to-end accountability.",
          "<b>Financing</b>: exists, but disconnected from early search and vehicle validation."
        ],
        stats: [
          { k: "Core gap", v: "No E2E", note: "No single continuous journey & responsibility." },
          { k: "Protection", v: "Reactive", note: "Warnings after risk, not prevention." },
        ],
        images: [
          { label: "Channel map (add)", src: "assets/Channel map.png" },
          { label: "Fragmentation visual (add)", src: "assets/Fragmentation visual.png" },
        ],
        sources: [
          "Common channel behaviors in Morocco: listings, social, brokers, dealers, garages, banks."
        ]
      },

      {
        id: "missing",
        tab: "Used-Car Ecosystem",
        title: "What is missing",
        subtitle: "The missing layer is trust infrastructure: verification, standards, pricing intelligence, and end-to-end accountability.",
        callout: "The market has components — but lacks integration, standardization, and preventive protection.",
        leftTag: "Missing layer",
        rightTag: "Outcomes",
        bullets: [
          "<b>Verified vehicle + seller identity</b> before a listing becomes “trusted”.",
          "<b>Unified inspection standard</b> with comparable reports and grading.",
          "<b>Reference pricing</b> based on model/year/mileage/condition/city.",
          "<b>Preventive fraud protection</b> (not just warnings).",
          "<b>One continuous journey</b>: discovery → inspection → financing → paperwork → handover.",
          "<b>Clear post-sale responsibility</b> (what happens if issues appear)."
        ],
        stats: [
          { k: "Verification", v: "Missing", note: "Upfront identity + vehicle checks." },
          { k: "Standardization", v: "Missing", note: "Comparable inspections & grading." },
          { k: "Transparency", v: "Missing", note: "Price intelligence & fair value." },
          { k: "Integration", v: "Missing", note: "Connected steps, less friction." }
        ],
        images: [
          { label: "Trust stack diagram (add)", src: "assets/Trust stack diagram.png" },
          { label: "Standard inspection report mock (add)", src: "assets/Standard inspection report mock.png" },
        ],
        sources: [
          "Benchmark conclusion from market structure: components exist, trust layer missing."
        ]
      },

      {
        id: "why-guazi",
        tab: "Strategic Deployment",
        title: "Why <span class='accent'>Guazi</span> is the right partner",
        subtitle: "China moved from distrust to global confidence — Guazi comes from a mature ecosystem that solved used-car trust at scale.",
        callout: "10–15 years ago: skepticism. Today: proven quality + modern tech + massive market maturity.",
        leftTag: "Trust shift",
        rightTag: "Guazi value",
        bullets: [
          "<b>Trust evolution</b>: Chinese automotive quality improved dramatically; consumers now trust Chinese brands for value + tech.",
          "<b>China is a mature automotive ecosystem</b>: intense competition forces high standards.",
          "<b>Guazi is built for used-car trust</b>: inspection logic, pricing intelligence, transaction control.",
          "<b>Proven at scale</b>: experience from a market with huge transaction volumes and operational complexity.",
          "<b>Know-how transfer</b>: processes, playbooks, and tech patterns adaptable to local reality."
        ],
        stats: [
          { k: "Chinese brands share (Morocco)", v: "25–32%", note: "Snapshot from shared visuals." },
          { k: "Growth signal", v: "+240%", note: "Example YoY jump highlighted in infographic." }
        ],
        images: [
          { label: "Guazi logo", src: "assets/guazi.png" },
          { label: "Add another visual here", src: "assets/Add another visual here.png" },
        ],
        sources: [
          "Use shared visuals + confirm with official sources when publishing externally."
        ]
      },

      {
        id: "objectives",
        tab: "Strategic Deployment",
        title: "Our objective with <span class='accent'>Guazi</span>",
        subtitle: "Transfer proven know-how to accelerate trust, standards, and efficiency — building a locally adapted, scalable ecosystem.",
        callout: "",
        leftTag: "Objectives",
        rightTag: "KPIs (examples)",
        bullets: [
          "<b>Transfer proven operating model</b>: adopt tested processes, not experiments.",
          "<b>Build trust architecture</b>: verification, inspection standard, and transparent pricing.",
          "<b>Reduce friction</b>: shorten buyer journey and increase conversion.",
          "<b>Raise market standards</b>: consistent quality expectations and reporting.",
          "<b>Create a scalable model</b>: pilot → replicate across regions."
        ],
        stats: [
          { k: "Time-to-market", v: "Faster", note: "Avoid years of trial-and-error." },
          { k: "Trust goal", v: "Higher", note: "Structured checks + standards." }
        ],
        images: [
          { label: "Roadmap visual (add)", src: "assets/Roadmap visual.png" },
          { label: "KPIs dashboard mock (add)", src: "assets/KPIs dashboard mock.png" },
        ],
        sources: [
          "Objectives derived from market gaps: trust, standardization, integration."
        ]
      },

      {
        id: "morocco-gateway",
        tab: "Morocco & Africa",
        title: "Why Morocco as a <span class='accent'>pilot gateway</span>",
        subtitle: "Morocco combines strategic geography, world-class logistics, and a mature automotive ecosystem — ideal to test and scale.",
        callout: "Pilot where infrastructure exists and outcomes are measurable — then expand through Morocco’s Africa gateway position.",
        leftTag: "Strategic reasons",
        rightTag: "Logistics hubs",
        bullets: [
          "<b>Geographic bridge</b>: direct link Europe ↔ Africa (Atlantic + Mediterranean routes).",
          "<b>World-class ports</b>: Tanger Med + Casablanca; plus emerging hubs (Nador West Med) and future Atlantic gateway (Dakhla).",
          "<b>Automotive export capability</b>: mature logistics, customs, compliance culture.",
          "<b>Market is big but controllable</b>: meaningful volume, manageable complexity for pilot tuning.",
          "<b>Gateway to West & Francophone Africa</b>: success becomes a replicable reference."
        ],
        stats: [
          { k: "Automotive exports", v: "~1M/yr", note: "Macro signal — validate with final source set for client." },
          { k: "Gateway value", v: "EU ↔ Africa", note: "Strategic bridge positioning." }
        ],
        images: [
          { label: "Ports / logistics map (add)", src: "assets/Ports logistics map.png" },
          { label: "Whiteboard notes visual (optional)", src: "assets/Whiteboard notes visual.png" },
        ],
        sources: [
          "Ports: Tanger Med / Casablanca / Nador West Med / Dakhla."
        ]
      },
      {
        id: "closing-image",
        tab: "Morocco & Africa",
        title: "",
        subtitle: "",
        callout: "",
        imageOnly: true,
        leftImage: {
          src: "assets/5.png",
          alt: "Slide image"
        }
      }
    ];

    // Tabs derived from slides
    const TAB_ORDER = [...new Set(SLIDES.map(s => s.tab))];

    // ===========================
    // Rendering logic
    // ===========================
    const $ = sel => document.querySelector(sel);

    const tabsEl = $("#tabs");
    const titleEl = $("#title");
    const subtitleEl = $("#subtitle");
    const calloutEl = $("#callout");

    const bulletsEl = $("#bullets");
    const statsEl = $("#stats");
    const growthEl = $("#growthCard");
    const leftTitleWrapEl = $("#panelTitleLeftWrap");
    const leftMediaEl = $("#leftMedia");
    const imagesEl = $("#images");
    const sourcesEl = $("#sources");
    const lightboxEl = $("#lightbox");
    const lightboxImgEl = $("#lightboxImg");
    const lightboxCloseEl = $("#lightboxClose");

    const leftTagEl = $("#panelTagLeft");
    const rightTagEl = $("#panelTagRight");

    const progressEl = $("#progress");
    const slideIndexEl = $("#slideIndex");

    const coverAreaEl = $("#coverArea");
    const mainGridEl = $("#mainGrid");
    const rightPanelEl = $("#rightPanel");

    let idx = 0;
    const leftMediaIndex = {};

    function buildTabs(){
      tabsEl.innerHTML = "";
      TAB_ORDER.forEach(tabName => {
        const btn = document.createElement("button");
        btn.className = "tab";
        btn.textContent = tabName;
        btn.onclick = () => {
          const first = SLIDES.findIndex(s => s.tab === tabName);
          if (first >= 0) setSlide(first);
        };
        tabsEl.appendChild(btn);
      });
    }

    function buildProgress(){
      progressEl.innerHTML = "";
      SLIDES.forEach((_, i) => {
        const d = document.createElement("div");
        d.className = "dot";
        d.title = `Go to slide ${i+1}`;
        d.onclick = () => setSlide(i);
        progressEl.appendChild(d);
      });
    }

    function setActiveTabs(tabName){
      [...tabsEl.children].forEach(t => {
        t.classList.toggle("active", t.textContent === tabName);
      });
    }

    function escapeHtml(str){
      return String(str)
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }

    function openLightbox(src, alt){
      if (!lightboxEl || !lightboxImgEl) return;
      lightboxImgEl.src = src;
      lightboxImgEl.alt = alt || "image";
      lightboxEl.classList.add("open");
      lightboxEl.setAttribute("aria-hidden", "false");
      document.body.style.overflow = "hidden";
    }

    function closeLightbox(){
      if (!lightboxEl || !lightboxImgEl) return;
      lightboxEl.classList.remove("open");
      lightboxEl.setAttribute("aria-hidden", "true");
      lightboxImgEl.src = "";
      lightboxImgEl.alt = "";
      document.body.style.overflow = "";
    }

    function renderSlide(s){
      titleEl.innerHTML = s.title;
      subtitleEl.textContent = s.subtitle || "";

      if (s.callout && s.callout.trim()){
        calloutEl.style.display = "";
        calloutEl.textContent = s.callout;
      } else {
        calloutEl.style.display = "none";
        calloutEl.textContent = "";
      }

      // ✅ COVER MODE
      if (s.isCover){
        coverAreaEl.style.display = "";
        mainGridEl.style.display = "none";

        // Button goes to "Who we are" (index 1)
        $("#btnStart").onclick = () => setSlide(1);

        // Still show dots and tabs highlighting
        slideIndexEl.textContent = `Slide ${idx+1} / ${SLIDES.length}`;
        [...progressEl.children].forEach((d,i)=> d.classList.toggle("active", i===idx));
        setActiveTabs(s.tab);

        // Disable Prev on cover
        $("#btnPrev").disabled = true;
        $("#btnPrev").style.opacity = 0.5;

        return;
      }

      // ✅ NORMAL MODE
      coverAreaEl.style.display = "none";
      mainGridEl.style.display = "";

      $("#btnPrev").disabled = false;
      $("#btnPrev").style.opacity = 1;

      const hideRightPanel = !!s.imageOnly || !!s.hideRightPanel;
      if (hideRightPanel){
        mainGridEl.classList.add("single");
        if (rightPanelEl) rightPanelEl.style.display = "none";
      } else {
        mainGridEl.classList.remove("single");
        if (rightPanelEl) rightPanelEl.style.display = "";
      }

      leftTagEl.textContent = s.leftTag || "Overview";
      rightTagEl.textContent = s.rightTag || "Evidence";

      const leftImages = Array.isArray(s.leftImages)
        ? s.leftImages
        : (s.leftImage ? [s.leftImage] : []);
      const cleanLeftImages = leftImages.filter(img => img && img.src && String(img.src).trim());
      const hasLeftImage = cleanLeftImages.length > 0;
      bulletsEl.innerHTML = "";
      statsEl.innerHTML = "";
      growthEl.innerHTML = "";
      growthEl.style.display = "none";
      leftMediaEl.innerHTML = "";

      if (hasLeftImage){
        const slideKey = s.id || String(idx);
        if (leftMediaIndex[slideKey] == null || leftMediaIndex[slideKey] >= cleanLeftImages.length){
          leftMediaIndex[slideKey] = 0;
        }
        const current = cleanLeftImages[leftMediaIndex[slideKey]];
        if (leftTitleWrapEl) leftTitleWrapEl.style.display = "none";
        bulletsEl.style.display = "none";
        statsEl.style.display = "none";
        growthEl.style.display = "none";
        leftMediaEl.style.display = "";
        leftMediaEl.innerHTML = `<img src="${escapeHtml(current.src)}" alt="${escapeHtml(current.alt || "left image")}">`;
        const leftImgEl = leftMediaEl.querySelector("img");
        if (leftImgEl){
          leftImgEl.loading = "lazy";
          leftImgEl.addEventListener("click", () => openLightbox(current.src, current.alt || "left image"));
        }
        if (cleanLeftImages.length > 1){
          leftMediaEl.innerHTML += `<button class="left-media-next" type="button" aria-label="Next image">&gt;</button>`;
          const nextBtn = leftMediaEl.querySelector(".left-media-next");
          if (nextBtn){
            nextBtn.addEventListener("click", () => {
              leftMediaIndex[slideKey] = (leftMediaIndex[slideKey] + 1) % cleanLeftImages.length;
              renderSlide(s);
            });
          }
        }
      } else {
        if (leftTitleWrapEl) leftTitleWrapEl.style.display = "";
        bulletsEl.style.display = "";
        statsEl.style.display = "";
        leftMediaEl.style.display = "none";

        (s.bullets || []).forEach(b => {
          const li = document.createElement("li");
          li.innerHTML = b;
          bulletsEl.appendChild(li);
        });

        if (s.growth){
          const rows = (s.growth.rows || []).map(r => `
            <tr>
              <td>${escapeHtml(r.year)}</td>
              <td class="growth-value">${escapeHtml(r.value)}</td>
            </tr>
          `).join("");
          growthEl.innerHTML = `
            <div class="growth-title">${escapeHtml(s.growth.title)}</div>
            <div class="growth-sub">${escapeHtml(s.growth.subtitle)}</div>
            <table class="growth-table">
              <thead>
                <tr><th>Year</th><th>Value</th></tr>
              </thead>
              <tbody>${rows}</tbody>
            </table>
            <div class="growth-note">${escapeHtml(s.growth.note)}</div>
          `;
          growthEl.style.display = "";
        }

        (s.stats || []).forEach(st => {
          const card = document.createElement("div");
          card.className = "stat";
          card.innerHTML = `
            <div class="k">${escapeHtml(st.k)}</div>
            <div class="v">${escapeHtml(st.v)}</div>
            <div class="note">${escapeHtml(st.note || "")}</div>
          `;
          statsEl.appendChild(card);
        });
      }

      imagesEl.innerHTML = "";
      (s.images || []).forEach(img => {
        const box = document.createElement("div");
        box.className = "img";
        if (img.src && img.src.trim()){
          box.classList.add("clickable");
          if ((img.label || "").toLowerCase().includes("guazi logo") || img.src.toLowerCase().includes("guazi.png")){
            box.classList.add("is-logo");
          }
          const im = document.createElement("img");
          im.src = img.src;
          im.alt = img.label || "image";
          im.loading = "lazy";
          im.addEventListener("click", () => openLightbox(img.src, img.label || "image"));
          box.appendChild(im);
        } else {
          box.textContent = (img.label || "Add image") + " (drop file in assets/ and set src)";
        }
        imagesEl.appendChild(box);
      });

      sourcesEl.innerHTML = "";
      if (s.sources && s.sources.length){
        sourcesEl.innerHTML =
          `<b style="color:#111827">Sources / notes</b><br>` +
          s.sources.map(x => `• ${escapeHtml(x)}`).join("<br>");
      }

      // progress + index + tabs
      [...progressEl.children].forEach((d,i)=> d.classList.toggle("active", i===idx));
      slideIndexEl.textContent = `Slide ${idx+1} / ${SLIDES.length}`;
      setActiveTabs(s.tab);
    }

    function setSlide(i){
      idx = Math.max(0, Math.min(SLIDES.length-1, i));
      renderSlide(SLIDES[idx]);
      location.hash = `#${idx+1}`;
    }

    function next(){ setSlide(idx+1); }
    function prev(){ setSlide(idx-1); }

    // Buttons
    $("#btnNext").addEventListener("click", next);
    $("#btnPrev").addEventListener("click", prev);
    if (lightboxEl){
      lightboxEl.addEventListener("click", (e) => {
        if (e.target === lightboxEl) closeLightbox();
      });
    }
    if (lightboxCloseEl){
      lightboxCloseEl.addEventListener("click", closeLightbox);
    }

    // Keyboard
    window.addEventListener("keydown", (e)=>{
      if (lightboxEl && lightboxEl.classList.contains("open")){
        if (e.key === "Escape") closeLightbox();
        return;
      }
      if (e.key === "ArrowRight" || e.key === "PageDown") next();
      if (e.key === "ArrowLeft" || e.key === "PageUp") prev();
      if (e.key === "Home") setSlide(0);
      if (e.key === "End") setSlide(SLIDES.length-1);
    });

    // Init
    buildTabs();
    buildProgress();

    // Load from hash
    const hashNum = parseInt((location.hash || "").replace("#",""), 10);
    if (!Number.isNaN(hashNum) && hashNum>=1 && hashNum<=SLIDES.length) {
      setSlide(hashNum-1);
    } else {
      setSlide(0); // ✅ Start with cover
    }
  </script>
</body>
</html>
